async function addMetadata(){try{let d=document.styleSheets[0].cssRules;for(let b=0;b<d.length;b++)if(/#identifiers/.exec(d[b].selectorText)){let h=d[b].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(h,document.styleSheets[0].cssRules.length)}}catch(i){console.log(i)}let e=document.getElementById("external-metadata");if(!e){console.log("Could not locate metadata <div> element");return}try{var c,a="",f=function(c){let b=document.getElementsByTagName("meta");for(let a=0;a<b.length;a++)if(b[a].getAttribute("name")===c)return b[a].getAttribute("content");return""}("rfc.number");if(f){c="https://www.rfc-editor.org/rfc/rfc"+f+".json";try{let j=await fetch(c);a=await j.json()}catch(m){c=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";let k=await fetch(c);a=await k.json()}}if(!a)return;e.style.display="block";let n="",o="https://datatracker.ietf.org/doc",p="https://datatracker.ietf.org/ipr/search",q="https://www.rfc-editor.org/info",r=a.doc_id.toLowerCase(),s=a.doc_id.slice(0,3).toLowerCase(),t=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"},g="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(b=>{if("status"==b){a[b]=a[b].toLowerCase();var m=a[b].split(" "),z=m.length,i="",A=1;for(let j=0;j<z;j++)A<z?i=i+v(m[j])+" ":i+=v(m[j]),A++;a[b]=i}else if("obsoletes"==b||"obsoleted_by"==b||"updates"==b||"updated_by"==b){var w,k="",B=1;w=a[b].length;for(let e=0;e<w;e++)if(a[b][e]){a[b][e]=String(a[b][e]);var C=a[b][e].slice(0,3),l=a[b][e].slice(3).replace(/^0+/,"");k=B<w?k+"<a href='"+n+"/rfc/"+C.toLowerCase().concat(l)+"'>"+l+"</a>, ":k+"<a href='"+n+"/rfc/"+C.toLowerCase().concat(l)+"'>"+l+"</a>",B++}a[b]=k}else if("see_also"==b){var x,h="",D=1;x=a[b].length;for(let f=0;f<x;f++)if(a[b][f]){a[b][f]=String(a[b][f]);var c=a[b][f].slice(0,3),d=a[b][f].slice(3).replace(/^0+/,"");h=D<x?"RFC"!=c?h+"<a href='"+n+"/info/"+c.toLowerCase().concat(d.toLowerCase())+"'>"+c+" "+d+"</a>, ":h+"<a href='"+n+"/info/"+c.toLowerCase().concat(d.toLowerCase())+"'>"+d+"</a>, ":"RFC"!=c?h+"<a href='"+n+"/info/"+c.toLowerCase().concat(d.toLowerCase())+"'>"+c+" "+d+"</a>":h+"<a href='"+n+"/info/"+c.toLowerCase().concat(d.toLowerCase())+"'>"+d+"</a>",D++}a[b]=h}else if("errata_url"==b){var y="";y=a[b]?y+"<a href='"+a[b]+"'>Errata exist</a> | <a href='"+o+"/"+r+"'>Datatracker</a>| <a href='"+p+"/?"+s+"="+t+"&submit="+s+"'>IPR</a> | <a href='"+q+"/"+r+"'>Info page</a>":"<a href='"+o+"/"+r+"'>Datatracker</a> | <a href='"+p+"/?"+s+"="+t+"&submit="+s+"'>IPR</a> | <a href='"+q+"/"+r+"'>Info page</a>",a[b]=y}""!=a[b]?"Errata"==u[b]?g+=`<dt>More info:</dt><dd>${a[b]}</dd>`:g+=`<dt>${u[b]}:</dt><dd>${a[b]}</dd>`:"Errata"==u[b]&&(g+=`<dt>More info:</dt><dd>${a[b]}</dd>`)}),g+="</dl>",e.innerHTML=g}catch(l){console.log(l)}function v(a){return a.charAt(0).toUpperCase()+a.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata)
